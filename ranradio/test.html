<!DOCTYPE html>
<html>
<head>
    <title>SoundCloud API Preloading</title>
    <script src="https://w.soundcloud.com/player/api.js"></script>
</head>
<body>

<div id="songs-container"></div>

<script>
    var songUrls = [
    "https://soundcloud.com/bonjovi/wild-in-the-streets",
    "https://soundcloud.com/alicecooperofficial/alice-cooper-im-eighteen",
    "https://soundcloud.com/whrecords/never-say-goodbye-bon-jovi",
    "https://soundcloud.com/mariachiman/the-power-of-love-huey-lewis",
    "https://soundcloud.com/doneagain/danger-zone-single-in-the",
    "https://soundcloud.com/officialmetallica/fuel-live-july-6-2014",
    "https://soundcloud.com/officialmetallica/whiskey-in-the-jar-live-3",
    "https://soundcloud.com/the-police-official/every-breath-you-take-2003"
]


    const songsContainer = document.getElementById("songs-container");
    const songWidgets = [];

    songUrls.slice(0, 10).forEach((songUrl, index) => {
        const songContainer = document.createElement("div");
        const songWidget = document.createElement("iframe");
        songWidget.setAttribute('width', '100%');
        songWidget.setAttribute('height', '166');
        songWidget.setAttribute('scrolling', 'no');
        songWidget.setAttribute('frameborder', 'no');
        songWidget.setAttribute('allow', 'autoplay');
        songWidget.src = `https://w.soundcloud.com/player/?url=${songUrl}&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true`;

        songContainer.appendChild(songWidget);
        songsContainer.appendChild(songContainer);

        songWidgets.push(songWidget);
    });

    let currentSongIndex = 0;

    function playCurrentSong() {
        songWidgets.forEach((songWidget, index) => {
            if (index === currentSongIndex) {
                songWidget.contentWindow.postMessage('{"method":"play"}', "*");
            } else {
                songWidget.contentWindow.postMessage('{"method":"pause"}', "*");
            }
        });

        currentSongIndex = (currentSongIndex + 1) % songWidgets.length;
    }

    // Automatically play the next song every 10 seconds
    setInterval(playCurrentSong, 10000);
</script>

</body>
</html>
